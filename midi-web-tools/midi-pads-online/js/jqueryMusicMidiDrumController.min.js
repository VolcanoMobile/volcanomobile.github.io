var jqueryMusicMidiDrumControllerPadSettingsLayout=function(d){var g={id:null,classePrefix:"jdc",rowIndex:0,columnIndex:0,notes:[36,38,39,50,47,43,42,46,51],notesText:(typeof gmStringDrumNotes==="undefined")?null:gmStringDrumNotes,notesTextShort:(typeof gmStringDrumNotesShort==="undefined")?null:gmStringDrumNotesShort,drumController:null,onAddPadEvent:null,onDeletePadEvent:null,onPadEventChannelChange:null,onPadNoteValueChange:null,onPadNoteVelocityChange:null};
var c=this;var a=null;var f=null;var e=null;var b=null;this.construct=function(h){$.extend(g,h);
if(g.notesText==null){g.notesText=new Array()}if(g.notesTextShort==null){g.notesTextShort=new Array()
}this.rootElement=$("#"+g.id+"");this.createLayout()};this.valuesChanged=function(){if(g.callbackValuesChanged!=null){g.callbackValuesChanged(g)
}};this.createLayout=function(){$.ajax({url:"./pad_settings.html",dataType:"html",cache:false,success:function(h){c.rootElement.html(h);
c.initLayout()}})};this.initLayout=function(){this.notesLayout=this.rootElement.find(".padSettingsNotesLayout");
this.notesLayout=$("#"+g.id+" .padSettingsNotesLayout");$("#"+g.id+" .addPadEvent").click(function(){if(g.onAddPadEvent){g.onAddPadEvent(g.rowIndex,g.columnIndex)
}});this.initNotesLayout();this.refreshPadValues()};this.initNotesLayout=function(){var j=g.drumController.getPad(g.rowIndex,g.columnIndex);
this.notesLayout.html(null);for(var h=0;h<j.getEventsCount();h++){this.initNoteLayout(h)
}};this.initNoteLayout=function(o){var j=g.drumController.getPad(g.rowIndex,g.columnIndex);
var h=j.getEvent(o);if(h){var l=$("<select/>",{id:g.id+"-note-layout-note-channel-select-"+o,"class":g.classePrefix+"-note-channel-select",style:" vertical-align: middle;"}).change(function(){if(g.onPadEventChannelChange){g.onPadEventChannelChange(g.rowIndex,g.columnIndex,o,$(this).val())
}});for(var k=0;k<16;k++){l.append($("<option/>",{value:k}).html(k+1))}l.val(h.getChannel());
var n=$("<select/>",{id:g.id+"-note-layout-note-value-select-"+o,"class":g.classePrefix+"-note-value-select",style:" vertical-align: middle;"}).change(function(){if(g.onPadNoteValueChange){g.onPadNoteValueChange(g.rowIndex,g.columnIndex,o,$(this).val())
}});for(var p=0;p<128;p++){n.append($("<option/>",{value:p}).html(p+" "+g.notesText[p]))
}n.val(h.getNoteValue());var i=$("<input/>",{id:g.id+"-note-layout-note-velocity-range-"+o,"class":g.classePrefix+"-note-velocity-range",type:"range",min:0,max:127,value:h.getNoteVelocity(),style:"display: inline-block; vertical-align: middle;"}).change(function(){if(g.onPadNoteVelocityChange){g.onPadNoteVelocityChange(g.rowIndex,g.columnIndex,o,$(this).val())
}});var m=$("<button/>",{id:g.id+"-note-layout-note-velocity-range-"+o,"class":g.classePrefix+"-note-velocity-range btn float-right m-0",type:"range",min:0,max:127,value:h.getNoteVelocity(),style:" vertical-align: middle;"}).html("<span class='fa fa-times'></span>").click(function(){if(g.onDeletePadEvent){g.onDeletePadEvent(g.rowIndex,g.columnIndex,o)
}});this.noteLayout=$("<div/>",{id:g.id+"-note-layout","class":g.classePrefix+"-note-layout list-group-item p-0 px-2"}).append(m).append($("<span/>",{id:g.id+"-note-layout-note-index-"+o,"class":g.classePrefix+"-notes-index-layout",style:"display: inline-block; line-height: 4rem; vertical-align: middle; white-space: nowrap;"}).html((o+1)+". ")).append($("<span/>",{"class":"mx-2",style:"display: inline-block;  vertical-align: middle;"}).html("Channel ")).append(l).append($("<span/>",{"class":"mx-2",style:"display: inline-block; vertical-align: middle;"}).html(" Note ")).append(n).append($("<span/>",{"class":"mx-2",style:"display: inline-block; vertical-align: middle;"}).html(" Velocity ")).append(i).appendTo(this.notesLayout)
}};this.refreshPadValues=function(){var h=this.rootElement.find("#padSettingsInfoText");
var i=g.drumController.getPad(g.rowIndex,g.columnIndex);h.html("pad "+g.rowIndex+"/"+g.columnIndex)
};this.setRowColumnIndex=function(i,h){g.rowIndex=i;g.columnIndex=h;this.refreshPadValues();
this.initNotesLayout()};this.setDrumController=function(h){g.drumController=h;this.refreshPadValues()
};this.construct(d)};var jqueryMusicMidiDrumControllerPadEvent=function(b){this.vars={type:jqueryMusicMidiDrumControllerPadEvent.TYPE_NOTE,channel:9,noteValue:36,noteVelocity:127,onChange:null};
var a=this;this.construct=function(c){$.extend(this.vars,c)};this.valuesChanged=function(){if(this.vars.onChange!=null){this.vars.onChange(this.vars)
}};this.getType=function(){return this.vars.type};this.setType=function(c){this.vars.type=c;
this.valuesChanged()};this.getChannel=function(){return parseInt(this.vars.channel)
};this.setChannel=function(c){this.vars.channel=c;this.valuesChanged()};this.getNoteValue=function(){return this.vars.noteValue
};this.setNoteValue=function(c){this.vars.noteValue=c;this.valuesChanged()};this.getNoteVelocity=function(){return this.vars.noteVelocity
};this.setNoteVelocity=function(c){this.vars.noteVelocity=c;this.valuesChanged()};
this.setOnChange=function(c){this.vars.onChange=c};this.serialize=function(){return JSON.stringify(a)
};this.construct(b)};jqueryMusicMidiDrumControllerPadEvent.TYPE_NOTE=0;var jqueryMusicMidiDrumController=function(b){this.vars={maxRows:8,maxColumns:16,pads:null,rows:5,columns:6,callbackValuesChanged:null};
var a=this;this.construct=function(c){$.extend(this.vars,c);this.initPads()};this.valuesChanged=function(){if(this.vars.callbackValuesChanged!=null){this.vars.callbackValuesChanged(this.vars)
}};this.initPads=function(d,c){this.vars.pads=new Array();for(var d=0;d<this.vars.maxRows;
d++){this.vars.pads[d]=new Array();for(var c=0;c<this.vars.maxRows;c++){this.vars.pads[d][c]=new jqueryMusicMidiDrumControllerPad()
}}};this.getPad=function(d,c){return this.vars.pads[d][c]};this.getId=function(){return this.vars.id
};this.getRows=function(){return this.vars.rows};this.setRows=function(c){if(c>0&&c<=this.vars.maxRows){this.vars.rows=c
}};this.getColumns=function(){return this.vars.columns};this.setColumns=function(c){if(c>0&&c<=this.vars.maxColumns){this.vars.columns=c
}};this.setCallbackValuesChanged=function(c){this.vars.callbackValuesChanged=c};this.serialize=function(){return JSON.stringify(a)
};this.serialize=function(){return JSON.stringify(a)};this.fixDeserialize=function(){for(var f=0;
f<this.vars.maxRows;f++){for(var d=0;d<this.vars.maxColumns;d++){if(this.vars.pads[f]){var e=this.vars.pads[f][d];
var c=new jqueryMusicMidiDrumControllerPad();this.vars.pads[f][d]=Object.assign(c,e);
this.vars.pads[f][d].fixDeserialize()}}}};this.construct(b)};var jqueryMusicMidiDrumControllerLayout=function(e){var h={id:null,classePrefix:"jdc",padsPadEditClass:"pads-pad-edit",notes:[36,38,39,50,47,43,42,46,51],notesText:(typeof gmStringDrumNotes==="undefined")?null:gmStringDrumNotes,notesTextShort:(typeof gmStringDrumNotesShort==="undefined")?null:gmStringDrumNotesShort,drumController:null,editMode:false,padClickCallback:null,noteEditClickCallback:null};
var c=this;var a=null;var d=null;var f=null;var b=null;var g=null;this.construct=function(i){$.extend(h,i);
if(h.notesText==null){h.notesText=new Array()}if(h.notesTextShort==null){h.notesTextShort=new Array()
}this.rootElement=$("#"+h.id+"");this.createMainLayout()};this.valuesChanged=function(){if(h.callbackValuesChanged!=null){h.callbackValuesChanged(h)
}};this.createMainLayout=function(){this.mainLayout=$("<div/>",{id:h.id+"-main-layout","class":h.classePrefix+"-main-layout"}).appendTo(this.rootElement);
this.createContentLayout()};this.createContentLayout=function(){this.contentLayout=$("<div/>",{id:h.id+"-content-layout","class":h.classePrefix+"-content-layout"}).appendTo(this.mainLayout);
this.createPadsLayout()};this.createPadsLayout=function(){this.padsLayout=$("<table/>",{id:h.id+"-pads-layout","class":h.classePrefix+"-pads-layout"}).appendTo(this.contentLayout);
this.createPadsRowsLayout()};this.createPadsRowsLayout=function(){this.padsLayout.html("");
for(var i=0;i<h.drumController.getRows();i++){this.createPadsRowLayout(i)}};this.createPadsRowLayout=function(o){var n=h.id+"-pads-layout";
var m=h.id+"-pads-row-"+o;var l=h.id+"-heading";this.padsLayout.append($("<tr/>",{id:m,"class":h.classePrefix+"-notes-row"}));
var k=h.drumController.getColumns();for(var i=0;i<k;i++){var j=drumController.getPad(o,i);
if(j){this.createPadLayout(o,i,k)}}this.refreshPadsState()};this.createPadLayout=function(r,l,n){var j=h.drumController.getPad(r,l);
var k=h.id+"-pads-row-"+r;var o=jQuery("#"+k);var m=$("<td/>",{id:h.id+"-pads-row-"+r+"-cell-"+l,"class":h.classePrefix+"-pads-pad-cell"}).css("width",(100/n)+"%").css("position","relative").mousedown(function(){var s=parseInt(jQuery(this).attr("noteValue"));
h.onPadMouseDown(r,l,j)}).mouseup(function(){var s=parseInt(jQuery(this).attr("noteValue"));
h.onPadMouseUp(r,l,j)});var q=$("<div/>",{"class":h.classePrefix+"-pads-pad"});m.append(q);
var i=$("<span/>",{"class":h.classePrefix+"-"+h.padsPadEditClass}).html("<span class='fa fa-pencil-alt'></span>").mousedown(function(){if(h.noteEditClickCallback){h.noteEditClickCallback(r,l)
}});q.append(i);var p=$("<span/>",{"class":h.classePrefix+"-pads-pad-label"}).html("Pad");
q.append(p);o.append(m)};this.refreshPadsState=function(){for(var k=0;k<h.drumController.getRows();
k++){var j=h.drumController.getColumns();for(var i=0;i<j;i++){this.refreshPadState(k,i)
}}};this.refreshPadState=function(x,p){var o=h.drumController.getPad(x,p);var j="";
var w="";for(var i=0;i<o.getEventsCount();i++){if(i>0){j+=" + ";w+="\n"}var l=o.getEvent(i);
var u=l.getNoteValue();var r=(u<h.notesText.length)?h.notesText[u]:"X";var m=(u<h.notesTextShort.length)?h.notesTextShort[u]:"X";
j+=m;w+=r+"("+u+")"}var k=h.id+"-pads-row-"+x+"-cell-"+p;var n=this.padsLayout.find("#"+k);
n.attr("title",w);var t=h.classePrefix+"-pads-pad-label";var s=n.find("."+t);s.html(j);
var q=h.classePrefix+"-"+h.padsPadEditClass;var v=n.find("."+q);v.css("display",h.editMode?"":"none")
};this.getId=function(){return h.id};this.setDrumController=function(i){h.drumController=i;
this.createPadsRowsLayout()};this.getEditMode=function(){return h.editMode};this.setEditMode=function(i){h.editMode=i;
this.refreshPadsState()};this.construct(e)};var jqueryMusicMidiDrumControllerPad=function(b){this.vars={events:[],changed:null};
var a=this;this.construct=function(c){this.vars.events[0]=new jqueryMusicMidiDrumControllerPadEvent({noteValue:36,velocity:127,onChange:null});
$.extend(this.vars,c)};this.valuesChanged=function(){if(this.vars.changed!=null){this.vars.changed(this.vars)
}};this.getId=function(){return this.vars.id};this.getEvents=function(){return this.vars.events
};this.getEvent=function(c){return this.vars.events[c]};this.getEventsCount=function(){if(this.vars.events==null){this.vars.events=[]
}return this.vars.events.length};this.addEvent=function(c){if(this.vars.events==null){this.vars.events=[]
}var d={noteValue:36,velocity:127,onChange:null};$.extend(d,c);this.vars.events[this.vars.events.length]=new jqueryMusicMidiDrumControllerPadEvent(d)
};this.deleteEvent=function(c){if(this.vars.events==null){this.vars.events=[]}this.vars.events.splice(c,1)
};this.setChanged=function(c){this.vars.changed=c};this.serialize=function(){return JSON.stringify(a)
};this.fixDeserialize=function(){if(this.vars.events){for(var e=0;e<this.vars.events.length;
e++){if(this.vars.events[e]){var d=this.vars.events[e];var c=new jqueryMusicMidiDrumControllerPadEvent();
this.vars.events[e]=Object.assign(c,d)}}}};this.construct(b)};var jqueryMusicMidiDrumControllerSettingsLayout=function(d){var f={id:null,classePrefix:"jdc",notes:[36,38,39,50,47,43,42,46,51],notesText:(typeof jqueryMusicMidiSimpleDrumNoteNames==="undefined")?null:jqueryMusicMidiSimpleDrumNoteNames,notesTextShort:(typeof jqueryMusicMidiSimpleDrumNoteNamesShort==="undefined")?null:jqueryMusicMidiSimpleDrumNoteNamesShort,drumController:null,onRowsChange:null,onColumnsChange:null};
var c=this;var a=null;var e=null;var b=null;this.construct=function(g){$.extend(f,g);
if(f.notesText==null){f.notesText=new Array()}if(f.notesTextShort==null){f.notesTextShort=new Array()
}this.rootElement=$("#"+f.id+"");this.createLayout()};this.valuesChanged=function(){if(f.callbackValuesChanged!=null){f.callbackValuesChanged(f)
}};this.createLayout=function(){$.ajax({url:"./settings.html",dataType:"html",cache:false,success:function(g){c.rootElement.html(g);
c.initInputs()}})};this.initInputs=function(){var i=this.rootElement.find("#rowValueText");
var k=this.rootElement.find("#decreaseRowsButton");k.click(function(){var l=f.drumController.getRows()-1;
if(f.onRowsChange){f.onRowsChange(l)}c.refreshRowsValues()});var j=this.rootElement.find("#increaseRowsButton");
j.click(function(){var l=f.drumController.getRows()+1;if(f.onRowsChange){f.onRowsChange(l)
}c.refreshRowsValues()});var h=this.rootElement.find("#decreaseColumnsButton");h.click(function(){var l=f.drumController.getColumns()-1;
if(f.onColumnsChange){f.onColumnsChange(l)}c.refreshColumnsValues()});var g=this.rootElement.find("#increaseColumnsButton");
g.click(function(){var l=f.drumController.getColumns()+1;if(f.onColumnsChange){f.onColumnsChange(l)
}c.refreshColumnsValues()});this.refreshInputsValues()};this.refreshInputsValues=function(){this.refreshRowsValues();
this.refreshColumnsValues()};this.refreshRowsValues=function(){var g=this.rootElement.find("#rowValueText");
g.html(f.drumController.getRows())};this.refreshColumnsValues=function(){var g=this.rootElement.find("#columnsValueText");
g.html(f.drumController.getColumns())};this.getId=function(){return f.id};this.setDrumController=function(g){f.drumController=g;
this.refreshInputsValues()};this.construct(d)};