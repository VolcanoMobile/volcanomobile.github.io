/* Copyright (C) Volcanomobile Systems, Inc - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Volcanomobile <contact@volcanomobile.net>, September 1943
 */
 var MIDIMessageEventParser=function(){var d=function(b,c){};d.parseEvent=function(b){for(var c=[],a=0;a<b.data.length;){var e=d.parseSingleEvent(b,a);c.push(e);a+=e.read}return c};d.parseSingleEvent=function(b,c){return d.parseSingleEventData(b.data,c)};d.parseEventData=function(b){for(var c=[],a=0;a<b.length;){var e=d.parseSingleEventData(b,a);c.push(e);a+=e.read}return c};d.parseSingleEventData=function(b,c){var a={};if(null==b)return null;if(0>=b.length-c)console.warn("Illegal MIDI message of length",
b.length);else{a.dataLength=b.length;a.dataHexString=d.getDataHexString(b,c);a.code=b[c]&240;if(128>a.code)a.read=1;else if(128<=a.code&&239>=a.code)switch(a.code){case 128:3<=b.length-c&&(a.type="noteOff",a.read=3,a.channel=b[c]&15,a.key=b[c+1]&127,a.velocity=b[c+2]&127);break;case 144:3<=b.length-c&&(a.type="noteOn",a.read=3,a.channel=b[c]&15,a.key=b[c+1]&127,a.velocity=b[c+2]&127);break;case 160:a.type="keyPressure";a.read=3;a.channel=b[c]&15;a.key=b[c+1]&127;a.pressure=b[c+2]&127;break;case 176:a.type=
"controlChange";a.read=3;a.channel=b[c]&15;a.controllerNumber=b[c+1]&127;a.controllerValue=b[c+2]&127;120===a.controllerNumber&&0===a.controllerValue?a.channelModeMessage="allSoundOff":121===a.controllerNumber?a.channelModeMessage="resetAllControllers":122===a.controllerNumber?a.channelModeMessage=0===a.controllerValue?"localControlOff":"localControlOn":123===a.controllerNumber&&0===a.controllerValue?a.channelModeMessage="allNotesOff":124===a.controllerNumber&&0===a.controllerValue?a.channelModeMessage=
"omniModeOff":125===a.controllerNumber&&0===a.controllerValue?a.channelModeMessage="omniModeOn":126===a.controllerNumber?a.channelModeMessage="monoModeOn":127===a.controllerNumber&&(a.channelModeMessage="polyModeOn");break;case 192:a.type="programChange";a.read=2;a.channel=b[c]&15;a.program=b[c+1];break;case 208:a.type="channelPressure";a.read=2;a.channel=b[c]&15;a.pressure=b[c+1]&127;break;case 224:a.type="pitchBend",a.read=3,a.channel=b[c]&15,a.msb=b[c+2]&127,a.lsb=b[c+1]&127,a.pitchBend=(a.msb<<
7)+a.lsb}else switch(b[0]){case 240:a.type="systemExclusive";break;case 248:a.type="clock";a.read=1;break;case 250:a.type="start";a.read=1;break;case 251:a.type="continue";a.read=1;break;case 252:a.type="stop",a.read=1}if(null==a.read||0>=a.read)a.read=1;return a}};d.getDataHexString=function(b,c){var a="";for(index in b)index>=c&&(a+=(0<index?" ":"")+b[index].toString(16).padStart(2,"0"));return a};return d}();