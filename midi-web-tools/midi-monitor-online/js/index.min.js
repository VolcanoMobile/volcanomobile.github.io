var myMidiAccessApi;jQuery(document).ready(function(){myMidiAccessApi=new jMidiAccessApi({initCallback:function(a){jQuery("#midiNotSupported").css("display",a.midiSupported?"none":"block")
},onRequestMidiAccessSuccess:function(a){jQuery("#requestMIDIAccessFailure").css("display","none");
if(a.midiSupported){devicesChanged(a)}},onRequestMIDIAccessFailure:function(){jQuery("#requestMIDIAccessFailure").css("display","")
},deviceStateChangeCallback:function(a,b){devicesChanged(b)},portConnectedCallback:function(a,b){devicesChanged(b)
},portDisconnectedCallback:function(a,b){devicesChanged(b)},receiveCallback:function(a){logMidiInputEventArray(MIDIMessageEventParser.parseEvent(a))
},logLevel:jMidiAccessApi.LOG_LEVEL_DEBUG});midiMessageEventParser=new MIDIMessageEventParser()
});jQuery(document).ready(function(){jQuery(".toggleMidiPanelButton").click(function(){jQuery("#midiPanel").slideToggle()
});jQuery(".clearMonitorTrigger").click(function(){jQuery("#inputLog").html("")});
jQuery(".copyMonitorTrigger").click(function(){jQuery("#inputLogClipBoard").css("display","");
var b=jQuery("#inputLog").html();while(b.indexOf("<br/>")>0){b=b.replace("<br/>","\n")
}while(b.indexOf("<br>")>0){b=b.replace("<br>","\n")}jQuery("#inputLogClipBoard").val(b);
var a=document.getElementById("inputLogClipBoard");a.select();a.setSelectionRange(0,99999);
document.execCommand("copy");jQuery("#inputLogClipBoard").css("display","none")})
});function devicesChanged(a){listMidiInputDevices(a.midiAccess)}function listMidiInputDevices(a){var b=jQuery("#midiInputs");
b.html("");if(a!=null){if(a.inputs!=null){if(a.inputs.size>0){a.inputs.forEach(function(c,e){var d="";
d+=""+(c.onmidimessage?"<span class='fa fa-check text-success'></span>":"<span class='fa fa-plug'></span>")+" ";
d+=c.name;d+=" <small>("+c.id+")</small>";b.append(jQuery("<button/>",{inputPortName:c.name,portConnected:c.onmidimessage?1:0,"class":"list-group-item  list-group-item-action"}).append(jQuery("<div/>",{}).html(d)).click(function(){var f=jQuery(this).attr("inputPortName");
if(parseInt(jQuery(this).attr("portConnected"))){myMidiAccessApi.unbindInputPortByName(f)
}else{myMidiAccessApi.bindInputPortByName(f)}}))})}else{b.append("<button class='list-group-item'>No input available</button>")
}}else{b.append("<b>MIDI outputs is null</b>")}}else{b.append("<b>No MIDI Access</b>")
}}function logMidiInputEventArray(g){var e="";for(var b in g){var a=g[b];var d=0;
for(var f in a){var c=a[f];if((typeof c)=="number"){c=(c+"").padStart(3,"0")}else{c=c.padEnd(14,".")+""
}e+=(d>0?", ":"")+f+": "+c;d++}}jQuery("#inputLog").prepend(e+"<br/>");jQuery("#inputLog").html(jQuery("#inputLog").html().substring(0,100000))
};