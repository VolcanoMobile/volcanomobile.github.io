var MIDIMessageEventParser=function(){var b=function a(d,c){};b.parseEvent=function(c){var d=new Array();
var f=0;while(f<c.data.length){var e=b.parseSingleEvent(c,f);d.push(e);f+=e.read}return d
};b.parseSingleEvent=function(c,d){return b.parseSingleEventData(c.data,d)};b.parseEventData=function(e){var c=new Array();
var f=0;while(f<e.length){var d=b.parseSingleEventData(e,f);c.push(d);f+=d.read}return c
};b.parseSingleEventData=function(c,e){var d={};if(c==null){return null}else{if(c.length-e<=0){console.warn("Illegal MIDI message of length",c.length);
return}}d.dataLength=c.length;d.dataHexString=b.getDataHexString(c,e);d.code=c[e]&240;
if(d.code<128){d.read=1}else{if(d.code>=128&&d.code<=239){switch(d.code){case 128:if(c.length-e>=3){d.type="noteOff";
d.read=3;d.channel=(c[e]&15);d.key=c[e+1]&127;d.velocity=c[e+2]&127}break;case 144:if(c.length-e>=3){d.type="noteOn";
d.read=3;d.channel=(c[e]&15);d.key=c[e+1]&127;d.velocity=c[e+2]&127}break;case 160:d.type="keyPressure";
d.read=3;d.channel=(c[e]&15);d.key=c[e+1]&127;d.pressure=c[e+2]&127;break;case 176:d.type="controlChange";
d.read=3;d.channel=(c[e]&15);d.controllerNumber=c[e+1]&127;d.controllerValue=c[e+2]&127;
if(d.controllerNumber===120&&d.controllerValue===0){d.channelModeMessage="allSoundOff"
}else{if(d.controllerNumber===121){d.channelModeMessage="resetAllControllers"}else{if(d.controllerNumber===122){if(d.controllerValue===0){d.channelModeMessage="localControlOff"
}else{d.channelModeMessage="localControlOn"}}else{if(d.controllerNumber===123&&d.controllerValue===0){d.channelModeMessage="allNotesOff"
}else{if(d.controllerNumber===124&&d.controllerValue===0){d.channelModeMessage="omniModeOff"
}else{if(d.controllerNumber===125&&d.controllerValue===0){d.channelModeMessage="omniModeOn"
}else{if(d.controllerNumber===126){d.channelModeMessage="monoModeOn"}else{if(d.controllerNumber===127){d.channelModeMessage="polyModeOn"
}}}}}}}}break;case 192:d.type="programChange";d.read=2;d.channel=(c[e]&15);d.program=c[e+1];
break;case 208:d.type="channelPressure";d.read=2;d.channel=(c[e]&15);d.pressure=c[e+1]&127;
break;case 224:d.type="pitchBend";d.read=3;d.channel=(c[e]&15);d.msb=c[e+2]&127;d.lsb=c[e+1]&127;
d.pitchBend=(d.msb<<7)+d.lsb;break}}else{switch(c[0]){case 240:d.type="systemExclusive";
break;case 248:d.type="clock";d.read=1;break;case 250:d.type="start";d.read=1;break;
case 251:d.type="continue";d.read=1;break;case 252:d.type="stop";d.read=1;break}}}if(d.read==null||d.read<=0){d.read=1
}return d};b.getDataHexString=function(e,f){var d="";for(index in e){if(index>=f){var c=e[index];
d+=(index>0?" ":"")+e[index].toString(16).padStart(2,"0")}}return d};return b}();